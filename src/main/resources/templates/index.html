<!DOCTYPE html>
<html lang="pt" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Total Electro</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
  <link rel="stylesheet" th:href="@{/css/styles.css}">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
  <!-- Estado de Autenticaci√≥n -->
  <div class="container mt-4" sec:authorize="isAuthenticated()">
    <div class="card mb-4">
      <div class="card-header bg-success text-white">
        <h5 class="mb-0">Estado de Autenticaci√≥n</h5>
      </div>
      <div class="card-body">
        <p><strong>Usuario:</strong> <span sec:authentication="name"></span></p>
        <p><strong>Roles:</strong> <span sec:authentication="principal.authorities"></span></p>
        <p><strong>Estado:</strong> <span class="text-success">Autenticado</span></p>
      </div>
    </div>
  </div>

  <!-- HEADER -->
  <div class="top-header">
    <div class="logo-header">
      <a href="/"><img th:src="@{/images/logo.png}" alt="Total Electro"></a>
    </div>
    <div class="search-bar">
      <form th:action="@{/product/search}" method="get">
        <input type="text" name="name" placeholder="Pesquisar...">
        <button type="submit">Buscar</button>
      </form>
    </div>
    <div class="header-actions">
      <button class="lang">üáßüá∑</button>
      <a th:href="@{/login}" class="account">Minha conta</a>
      <a href="#" class="cart"><img th:src="@{/images/cart-outline.png}" alt="Carrinho"><span class="cart-count">3</span></a>
    </div>
  </div>
  <!-- MENU -->
  <nav class="main-menu">
    <div class="menu-items">
      <a th:href="@{/product/category/iluminacion}">Ilumina√ß√£o</a>
      <a th:href="@{/product/category/cables-y-accessorios}">Cabos e acess√≥rios</a>
      <a th:href="@{/product/category/herramientas-electricas}">Ferramentas el√©tricas</a>
      <a th:href="@{/product/category/automatizacion-y-domoticas}">Automa√ß√£o e dom√≥tica</a>
      <a th:href="@{/product/category/seguridad-electrica}">Seguran√ßa el√©trica</a>
    </div>
    <div class="menu-offers">
      <button>Ofertas e promo√ß√µes</button>
    </div>
  </nav>
  <!-- BANNER -->
  <div class="banner">
    <div class="banner-img">
      <img th:src="@{/images/entregador.png}" alt="Banner">
    </div>
    <div class="banner-text">
      <h1>
        <span class="envios-text">ENVIOS</span><br>
        <span class="imediatos-text">IMEDIATOS</span>
      </h1>
      <p>Tu pedido sera enviado en menos de 24 horas</p>
    </div>
  </div>
  <!-- FEATURES -->
  <div class="features">
    <div class="feature-item">
      <img th:src="@{/images/truck (1).png}" alt="Envio r√°pido" class="feature-img">
      <div>
        <span>Envio r√°pido</span>
        <p class="feature-description">Log√≠stica pr√≥pria</p>
      </div>
    </div>
    <div class="feature-item">
      <img th:src="@{/images/verifica.png}" alt="Loja certificada" class="feature-img">
      <div>
        <span>Loja certificada</span>
        <p class="feature-description">Compre com seguran√ßa</p>
      </div>
    </div>
    <div class="feature-item">
      <img th:src="@{/images/tarjetas.png}" alt="Todas as bandeiras" class="feature-img">
      <div>
        <span>Todas as bandeiras</span>
        <p class="feature-description">Facilitamos suas compras</p>
      </div>
    </div>
  </div>
  <!-- CAROUSEL DE PRODUTOS -->
  <section class="products-section">
    <h2>Mais vendidos</h2>
    <div class="carousel">
      <div class="carousel-arrow" onclick="showSlide(0)">&#8592;</div>
      <div class="product-list">
        <div class="carousel-slide active" id="slide-0">
          <th:block th:each="product : ${popularProductsSlide1}">
            <div class="product">
              <span class="fav">&#10084;</span>
              <img th:if="${product.imageUrl != null}" 
                   th:src="${product.imageUrl}" 
                   th:alt="${product.name}"
                   class="product-image">
              <div th:unless="${product.imageUrl != null}" class="no-image">
                <i class="bi bi-image"></i>
              </div>
              <span class="tag">Mais vendido</span>
              <h3 th:text="${product.name}">Nome do produto</h3>
              <span class="price-new" th:text="'R$ ' + ${product.price}">R$ 0,00</span>
              <a th:href="@{/product/{id}(id=${product.id})}" class="btn-comprar">Comprar</a>
            </div>
          </th:block>
        </div>
        <div class="carousel-slide" id="slide-1">
          <th:block th:each="product : ${popularProductsSlide2}">
            <div class="product">
              <span class="fav">&#10084;</span>
              <img th:if="${product.imageUrl != null}" 
                   th:src="${product.imageUrl}" 
                   th:alt="${product.name}"
                   class="product-image">
              <div th:unless="${product.imageUrl != null}" class="no-image">
                <i class="bi bi-image"></i>
              </div>
              <span class="tag">Mais vendido</span>
              <h3 th:text="${product.name}">Nome do produto</h3>
              <span class="price-new" th:text="'R$ ' + ${product.price}">R$ 0,00</span>
              <a th:href="@{/product/{id}(id=${product.id})}" class="btn-comprar">Comprar</a>
            </div>
          </th:block>
        </div>
      </div>
      <div class="carousel-arrow" onclick="showSlide(1)">&#8594;</div>
    </div>
    <div style="margin: 0 auto 18px auto;">
      <span id="dot-0" style="color:#f36f21;font-size:22px;cursor:pointer;" onclick="showSlide(0)">‚óè</span>
      <span id="dot-1" style="color:#eee;font-size:22px;cursor:pointer;" onclick="showSlide(1)">‚óè</span>
    </div>
  </section>
  <script>
    function showSlide(n) {
      document.getElementById('slide-0').classList.remove('active');
      document.getElementById('slide-1').classList.remove('active');
      document.getElementById('slide-' + n).classList.add('active');
      document.getElementById('dot-0').style.color = n === 0 ? '#f36f21' : '#eee';
      document.getElementById('dot-1').style.color = n === 1 ? '#f36f21' : '#eee';
    }
    window.onload = function() { showSlide(0); };
  </script>
  <!-- MARCAS -->
  <section class="brands-section">
    <h2>MARCAS</h2>
    <div class="brand-logos">
      <img th:src="@{/images/brands/schneider.png}" alt="Schneider">
      <img th:src="@{/images/brands/kalop.jpg}" alt="Kalop">
      <img th:src="@{/images/brands/trefilcon.png}" alt="Trefilcon">
      <img th:src="@{/images/brands/macroled.png}" alt="Macroled">
      <img th:src="@{/images/brands/richi.avif}" alt="Richi">
      <img th:src="@{/images/brands/roker.png}" alt="Roker">
    </div>
  </section>
  <!-- FOOTER -->
  <footer>
    <div class="footer-content">
      <div class="footer-col">
        <strong>Informa√ß√µes de contato</strong><br>
        Rivera<br>
        Sarand√≠ 821, 40000, Rivera, Uruguai<br>
        Tel.: +598 4623 5798<br>
        Email: total-electro@gmail.com
      </div>
      <div class="footer-col footer-logo-social">
        <img th:src="@{/images/logo.png}" alt="Total Electro">
        <div class="footer-socials">
          <img th:src="@{/images/social/facebook.png}" alt="Facebook">
          <img th:src="@{/images/social/instagram.png}" alt="Instagram">
          <img th:src="@{/images/social/whatsapp.png}" alt="WhatsApp">
        </div>
      </div>
      <div class="footer-col">
        <strong>Perguntas frequentes</strong><br>
        Formas de pagamento:<br>
        <span class="footer-payments">
          <img th:src="@{/images/payments/visa.png}" alt="Visa" class="visa-logo">
          <img th:src="@{/images/payments/master.png}" alt="Mastercard" class="mastercard-logo">
        </span>
      </div>
    </div>
    <div class="footer-bottom">
      <span>&copy; 2024 Total Electro</span>
      <span>Todos os direitos reservados</span>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Funci√≥n para verificar el estado de autenticaci√≥n
    function checkAuthStatus() {
      fetch('/auth-status')
        .then(response => response.json())
        .then(data => {
          console.log('Estado de autenticaci√≥n:', data);
        })
        .catch(error => console.error('Error:', error));
    }

    // Verificar estado al cargar la p√°gina
    document.addEventListener('DOMContentLoaded', checkAuthStatus);
  </script>
</body>
</html> 